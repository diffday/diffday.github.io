<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>数据库schema概念差异 | Diffday</title><meta name="keywords" content="数据库"><meta name="author" content="DiffDay"><meta name="copyright" content="DiffDay"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="数据库schema概念差异"><meta name="application-name" content="数据库schema概念差异"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="数据库schema概念差异"><meta property="og:url" content="https://blog.diffday.com/%E6%95%B0%E6%8D%AE%E5%BA%93schema%E6%A6%82%E5%BF%B5%E5%B7%AE%E5%BC%82.html"><meta property="og:site_name" content="Diffday"><meta property="og:description" content="涉及到数据库的模式有很多疑惑，问题经常出现在模式和数据库之间是否有区别，的确有区别，取决于数据库供应商，各家数据库系统倾向于以自己的方式处理模式(schema)这个概念。 概念厂商差异 MySQL MySQL文档指出：在概念上，模式是一组相互关联的数据库对象，如表，表列，列的数据类型，索引，外键等"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://cdn.diffday.com/picgo/20230619174001.png"><meta property="article:author" content="DiffDay"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://cdn.diffday.com/picgo/20230619174001.png"><meta name="description" content="涉及到数据库的模式有很多疑惑，问题经常出现在模式和数据库之间是否有区别，的确有区别，取决于数据库供应商，各家数据库系统倾向于以自己的方式处理模式(schema)这个概念。 概念厂商差异 MySQL MySQL文档指出：在概念上，模式是一组相互关联的数据库对象，如表，表列，列的数据类型，索引，外键等"><link rel="shortcut icon" href="https://cdn.diffday.com/picgo/diff32.ico"><link rel="canonical" href="https://blog.diffday.com/%E6%95%B0%E6%8D%AE%E5%BA%93schema%E6%A6%82%E5%BF%B5%E5%B7%AE%E5%BC%82"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="UaMvLIOYuNWHgVq42dlN49RoniU73U6SoqoRnEcit9E"/><meta name="baidu-site-verification" content="code-DN25SBuR8T"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b5c9889dd454fff053fb5b93fc1b2ac7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-X0MW6B53JB"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-X0MW6B53JB');
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"同博主们无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"一次时空相逢，祝好！","backTitle":"欢迎回来！"},
  LA51: {"enable":true,"ck":"3G4PP4R5LAAt6DBv","LingQueMonitorID":"3GA1sASrkc8hJd7c"},
  greetingBox: {"enable":true,"default":"晚上好👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 为下午蓄力充电","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: undefined,
  friends_vue_info: undefined,
  navMusic: false,
  mainTone: {"mode":"both","api":"https://img2color-go.vercel.app/api?img=","cover_change":true},
  authorStatus: undefined,
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: DiffDay","link":"链接: ","source":"来源: Diffday","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Diffday',
  title: '数据库schema概念差异',
  postAI: '',
  pageFillDescription: '概念厂商差异, MySQL, Oracle, SQL Server, 差别清单, 逻辑概念的命名空间, schema的功效, 国内的信创数据库生态, 产业图谱, 数据库溯源图谱, 用户选择视角, 谱系说明, Oracle兼容, MySQL兼容, PG兼容, Open Gauss体系, Informix兼容, 自研分布式, 参考涉及到数据库的模式有很多疑惑问题经常出现在模式和数据库之间是否有区别的确有区别取决于数据库供应商各家数据库系统倾向于以自己的方式处理模式这个概念概念厂商差异文档指出在概念上模式是一组相互关联的数据库对象如表表列列的数据类型索引外键等等但在物理上模式和数据库是同义的所以和是一回事在中和可以混用的文档却指出某些对象可存储在数据库中但不能存储在中因此二者不是一回事是数据或模式对象的逻辑结构的集合由数据库用户拥有且与该用户具有相同的名称也就是每个用户拥有一个独立的的与数据库用户密切相关在中实际并不创建一个模式因为在创建用户时数据库用户就已经创建了一个模式也就是说在中就创建了一个语句允许你将同表和视图关联起来并在这些对象上授权从而不必在多个事务中发出多个语句说是内部一个独立的实体和不是一回事包含了数据库的表字段数据类型以及主键和外键的名称与不同创建了一个单独定义到数据库的模式但自然也和不同在中一旦创建了模式就可以往模式中添加用户和对象差别清单逻辑概念的命名空间的另一个含义是大多数关系型数据库引擎用于对对象分组的特定元素可以把认为是一个命名空间或容器其中包含有表视图和函数等数据库的所有者就是的所有者的功效主要在以下的场景中将拆分为多个容易为整个来分配权限可以基于用户访问权限应用安全权限来分隔和保护数据库对象为两个或多个不同的表或其他对象使用同一个对相似的对象进行分组来降低复杂度数据库对象的逻辑分组可以被数据库管理起来可以将数据库对象组织成逻辑分组同一个可以用在不同的数据库中可以很容易地对几个的进行切换国内的信创数据库生态产业图谱征集评选填写数据库产品与产业图谱调研表发送至邮件主题为企业名称数据库产品与产业图谱权当个信息黄页看吧中国组织编纂的官方机构不少呢且并不是你去参加技术峰会也能感知到数据库溯源图谱经实证的效果离专业的脑图工具还有不小的差距国产数据库谱系自研兼容达梦浪潮科蓝软件分布式巨杉数据库华为海量人大金仓南大通用神舟通用神通中国移动磐维数据库云和恩墨超图软件禹贡超聚安华为腾讯亚信社区版瀚高优炫阿里恒生电子浪潮中国电信阿里腾讯万里开源中兴通讯热璞星环百度中国电信石原子科技南大通用星瑞格华胜开源社区精神在于众人拾柴火焰高不过在数据库主版本一路迭代时大多数企业并未安排数据库升级合并另一些基于自身需求做的功能增强和社区主版越行越远未积极融入社区讨论与回馈最终变成主版本更新迭代很多代了自己的核心还停留在上个世纪这点上在社区尤为明显国内基于的自研数据库已经没办法再去最新的的代码如和的差距越来越大最终决定开源自己的版本用户使用数据库必伴随着应用系统中间件操作系统硬件平台等上下游产品另一方面在整个数据库销售链条当中也涉及分销商增值渠道商独立软件开发商系统集成商数据库运维伙伴一系列的商业链条从学术上来看又要考虑高效合作顶会期刊与成果转化独立应用开发商合作周边生态产品合作管理工具调优工具报表工具工具用户选择视角对用户来讲考察主要在如下几点兼容性是否兼容主流标准主流开发工具和报表工具合作伙伴是否有足够多的合作伙伴已基于该产品进行了二次开发或加工有多少解决方案案例多不多踩着别人的脚印走不容易踩到谱系说明兼容主选手是武汉达梦及浪潮数据库产品功能和特性基本复刻如这样的技术兼容最为流行的数据库簇拥衍生品肯定不缺但一方面存在数据量上面的瓶颈和的差异化概念设计也一定程度上制约它的迁移替代机会给了库施展魅力的空间兼容开源界除开就是备受喜爱除开上面说的问题另的开源协议不允许衍生品作为闭源软件发布和销售只能卖服务这使得国内厂商望而生畏导致大量倒向协议的如巨杉数据库腾讯等体系源自的变体现在也作为一个独立的生态体系存在自主可控了国内有不少数据库转投阵营如人大金仓等兼容年对中国公司销售源代码与签订源代码授权的公司有华胜天成南大通用和星瑞格故成为引进源代码发展国产数据库的代表自研分布式基于树的数据库因其优秀的写友好及高并发也有非常优秀的产品典型的就是和基于结合或协议实现分布式高可用另巨杉数据库是一款金融级分布式数据库支持创建多种类型数据库实例四种关系型数据库实例文档类数据实例及对象存储的非结构化数据实例参考国产数据库选型生态篇',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-06-18 12:27:28',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Diffday</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本站</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/copyright/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 版权协议</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="http://cdn.diffday.com/picgo/wechatpay.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src="http://cdn.diffday.com/picgo/wechatpay.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="http://cdn.diffday.com/picgo/alipay-n.jpeg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="http://cdn.diffday.com/picgo/alipay-n.jpeg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><!-- if (page.copyright_author && page.copyright_author !== config.author)// a.post-meta-original 转载--><!-- else--><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF/" itemprop="url">信息技术</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>数据库</span></a></span></div></div><h1 class="post-title" itemprop="name headline">数据库schema概念差异</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-06-19T09:43:00.000Z" title="发表于 2023-06-19 17:43:00">2023-06-19</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-06-18T04:27:28.000Z" title="更新于 2024-06-18 12:27:28">2024-06-18</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">2.1k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>7分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="数据库schema概念差异"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为深圳"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>深圳</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="http://cdn.diffday.com/picgo/20230619174001.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://blog.diffday.com/%E6%95%B0%E6%8D%AE%E5%BA%93schema%E6%A6%82%E5%BF%B5%E5%B7%AE%E5%BC%82.html"><header><a class="post-meta-categories" href="/categories/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF/" itemprop="url">信息技术</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" tabindex="-1" itemprop="url">数据库</a><h1 id="CrawlerTitle" itemprop="name headline">数据库schema概念差异</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">DiffDay</span><time itemprop="dateCreated datePublished" datetime="2023-06-19T09:43:00.000Z" title="发表于 2023-06-19 17:43:00">2023-06-19</time><time itemprop="dateCreated datePublished" datetime="2024-06-18T04:27:28.000Z" title="更新于 2024-06-18 12:27:28">2024-06-18</time></header><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://cdn.diffday.com/picgo/20230619174001.png" alt="数据库厂商实现schema差别"></p>
<p>涉及到数据库的模式有很多疑惑，问题经常出现在模式和数据库之间是否有区别，的确有区别，取决于数据库供应商，各家数据库系统倾向于以自己的方式处理模式(schema)这个概念。</p>
<h1>概念厂商差异</h1>
<h2 id="MySQL">MySQL</h2>
<p>MySQL文档指出：在概念上，模式是一组相互关联的数据库对象，如表，表列，列的数据类型，索引，外键等等；但在物理上，模式和数据库是同义的，所以schema和database是一回事，在MySQL中create schema和create database可以混用</p>
<span id="more"></span>
<h2 id="Oracle">Oracle</h2>
<blockquote>
<p>A schema is a collection of logical structures of data, or schema objects. A schema is owned by a database user and has the same name as that user.Each user owns a single schema</p>
</blockquote>
<p>Oracle的文档却指出，某些对象可存储在数据库中，但不能存储在schema中，因此二者不是一回事，schema是数据或模式对象的逻辑结构的集合，由数据库用户拥有，且与该用户具有相同的名称，也就是每个用户拥有一个独立的schema。Oracle的schema与数据库用户密切相关。</p>
<p>在oracle中，create schema实际并不创建一个模式，因为在创建用户时，数据库用户就已经创建了一个模式，也就是说在oracle中create user就创建了一个schema。create schema语句允许你将schema同表和视图关联起来，并在这些对象上授权，从而不必在多个事务中发出多个SQL语句</p>
<h2 id="SQL-Server">SQL Server</h2>
<blockquote>
<p>The names of tables,fields,data types and primary and foreign keys of a database</p>
</blockquote>
<p>SQL Server说schema是server内部一个独立的实体，和database不是一回事，包含了数据库的表，字段，数据类型以及主键和外键的名称。与MySQL不同，create schema创建了一个单独定义到数据库的模式，但自然也和oracle不同，在SQL Server中，一旦创建了模式，就可以往模式中添加用户和对象。</p>
<h2 id="差别清单">差别清单</h2>
<table>
<thead>
<tr>
<th style="text-align:left">DBMS</th>
<th style="text-align:left">Database/Schema</th>
<th style="text-align:left">Implicit schema</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><strong>Just schemas</strong></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">Oracle</td>
<td style="text-align:left">Server =&gt; Schema = User</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">MySQL</td>
<td style="text-align:left">Server =&gt; Database = Schema</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">MariaDB</td>
<td style="text-align:left">Server =&gt; Database = Schema</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">Teradata</td>
<td style="text-align:left">Server =&gt; Database = Schema</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">Firebird</td>
<td style="text-align:left">Server =&gt; Database = Schema</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">Interbase</td>
<td style="text-align:left">Server =&gt; Database = Schema</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">SQLite</td>
<td style="text-align:left">File = Database = Schema</td>
<td style="text-align:left">main</td>
</tr>
<tr>
<td style="text-align:left"><strong>Databases and schemas</strong></td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">SQL Server</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">dbo</td>
</tr>
<tr>
<td style="text-align:left">PostgreSQL</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">public</td>
</tr>
<tr>
<td style="text-align:left">Azure SQL Database</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">dbo</td>
</tr>
<tr>
<td style="text-align:left">IBM Db2</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">Amazon Redshift</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">public</td>
</tr>
<tr>
<td style="text-align:left">Snowflake</td>
<td style="text-align:left">Warehouse =&gt; Database =&gt; Schema</td>
<td style="text-align:left">public</td>
</tr>
<tr>
<td style="text-align:left">SAP/Sybase ASE</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">dbo</td>
</tr>
<tr>
<td style="text-align:left">SAP HANA</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">N/A</td>
</tr>
<tr>
<td style="text-align:left">Vertica</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">public</td>
</tr>
<tr>
<td style="text-align:left">IBM Informix</td>
<td style="text-align:left">Database =&gt; Schema</td>
<td style="text-align:left">N/A</td>
</tr>
</tbody>
</table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://cdn.diffday.com/picgo/20230619173124.png" alt="差别形象图例"></p>
<h1>逻辑概念的命名空间</h1>
<p>schema的另一个含义是<strong>大多数关系型数据库引擎用于对对象分组的特定元素</strong>。</p>
<p>可以把schema认为是一个命名空间(namespace)或容器(container)，其中包含有表、视图和函数等。</p>
<p>数据库(database)的所有者就是schema的所有者</p>
<h2 id="schema的功效">schema的功效</h2>
<p>主要在以下的场景中<strong>将database拆分为多个schema</strong>(namespace):</p>
<ol>
<li>容易为整个schema来<strong>分配权限</strong>，可以基于用户访问权限应用安全权限来分隔和保护数据库对象</li>
<li>为两个或多个不同的表(或其他对象)使用<strong>同一个name</strong></li>
<li>对相似的对象进行<strong>分组</strong>来降低复杂度，数据库对象的逻辑分组可以被数据库管理起来，schema可以将数据库对象组织成逻辑分组。</li>
<li>同一个schema可以用在不同的数据库中</li>
<li>可以很容易地对几个schema的ownership进行切换</li>
</ol>
<h1>国内的信创数据库生态</h1>
<h2 id="产业图谱">产业图谱</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="http://cdn.diffday.com/picgo/20230919090822.png" alt="中国数据库产业图谱2023调查问卷结果"></p>
<blockquote>
<p>征集+评选，填写“数据库产品与产业图谱调研表”，发送至liusiyuan@caict.ac.cn，邮件主题为“企业名称+数据库产品与产业图谱”。权当个信息黄页看吧，中国组织编纂的官方机构不少呢，且并不是NGO，你去参加IT技术峰会也能感知到。</p>
</blockquote>
<h2 id="数据库溯源图谱">数据库溯源图谱</h2>
<blockquote>
<p>经实证mermaid的mindmap效果离专业的脑图工具还有不小的差距</p>
</blockquote>
<pre class="mermaid">mindmap
  root[国产OLTP数据库谱系]
    ((自研))
      (Oracle兼容)
        达梦DMB
        浪潮K~DB
        科蓝软件SunDB
      (RocksDB分布式)
        TiDB
        OceanBase
      (巨杉数据库SequoiaDB)
    ((PostgreSQL))
      (华为 Open Gauss)
        海量 VastBase
        人大金仓 KingBase
        南大通用 Gbase 8c
        神舟通用 神通V7
        中国移动 磐维数据库
        云和恩墨 MogDB
        超图软件 Yukon禹贡
        超聚安 FusionDB
      (PGXC)
        华为 GaussDB
        腾讯 TBASE
        亚信 AntDB
      (PG社区版)
        瀚高 ivorySQL
        优炫 UXDB
        阿里 PolarDB~PG
        恒生电子 LightDB
        浪潮 kaiwuDB
        中国电信 TeleDB PG
    ((MySQL))
      阿里
      	RDS~MySQL
      	PolarDB~mysql
      腾讯 TDSQL
      万里开源 GreatSQL
      中兴通讯 GoldenDB
      热璞 HotDB
      星环 KunDB
      百度 GaiaDB
      中国电信 TeleDB~mysql
      石原子科技 StoneDB
    ((Informix))
      南大通用 Gbase 8s
      星瑞格 SinoDB
      华胜 xigemaDB</pre>
<p>开源社区精神在于众人拾柴火焰高，不过在数据库主版本一路迭代时，大多数企业并未安排数据库升级合并，另一些基于自身需求做的功能增强和社区主版越行越远（未积极融入社区讨论与回馈），最终变成主版本更新迭代很多代了，自己的核心还停留在上个世纪，这点上在PG社区尤为明显（国内基于PG的自研数据库，已经没办法再去merge最新的PG15的代码，如PolarDB for PG，和PG的差距越来越大，最终决定开源自己的Polar for PG版本）。</p>
<p>用户使用数据库，必伴随着应用系统，中间件，操作系统，硬件平台等上下游产品，另一方面在整个数据库销售链条当中也涉及分销商，增值渠道商，独立软件开发商，系统集成商，数据库运维伙伴一系列的商业链条。从学术上来看，又要考虑高效合作（顶会期刊与成果转化），独立应用开发商合作，周边生态产品合作（管理工具，调优工具，报表工具，SQL工具）。</p>
<h3 id="用户选择视角">用户选择视角</h3>
<p>对用户来讲，考察主要在如下几点：</p>
<ol>
<li>兼容性：是否兼容主流标准，主流开发工具和报表工具</li>
<li>合作伙伴：是否有足够多的合作伙伴，已基于该产品进行了二次开发或加工，有多少解决方案</li>
<li>案例多不多：踩着别人的脚印走，不容易踩到💩</li>
</ol>
<h3 id="谱系说明">谱系说明</h3>
<h4 id="Oracle兼容">Oracle兼容</h4>
<p>主选手是武汉达梦，及浪潮K-DB数据库，产品功能和特性，基本复刻Oracle，如RAC这样的技术。</p>
<h4 id="MySQL兼容">MySQL兼容</h4>
<p>最为流行的数据库，簇拥衍生品肯定不缺。但一方面MySQL存在数据量上面的瓶颈，和Oracle的差异化概念设计也一定程度上制约它的迁移替代机会，给了PG库施展魅力的空间。</p>
<h4 id="PG兼容">PG兼容</h4>
<p>开源界除开Mysql，就是PostgreSQL备受喜爱，除开上面说的MySQL问题，另MySQL/MariaDB的GPL开源协议，不允许衍生品作为闭源软件发布和销售，只能卖服务，这使得国内厂商望而生畏，导致大量倒向BSD协议的PG，如巨杉数据库，腾讯TBase等。</p>
<h4 id="Open-Gauss体系">Open Gauss体系</h4>
<p>源自PG9的变体，现在也作为一个独立的生态体系存在。自主可控了，国内有不少数据库转投open gauss阵营，如人大金仓，MogDB等。</p>
<h4 id="Informix兼容">Informix兼容</h4>
<p>2005年，IBM对中国公司销售informix源代码，与IBM签订源代码授权的公司有华胜天成，南大通用和星瑞格，故成为引进Informix源代码发展国产数据库的代表</p>
<h4 id="自研分布式">自研分布式</h4>
<p>基于LSM树的数据库，因其优秀的写友好及高并发，也有非常优秀的产品。典型的就是TiDB和OceanBase，基于LSM-Tree，结合Paxos或Raft协议实现分布式高可用。</p>
<p>另SequoiaDB巨杉数据库，是一款金融级分布式数据库，支持创建多种类型数据库实例MySQL，MariaDB，PostgreSQL，SparkSQL四种关系型数据库实例，JSON文档类数据实例，及S3对象存储的非结构化数据实例。</p>
<h1>参考</h1>
<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a target="_blank" rel="noopener" href="https://database.guide/what-is-a-database-schema/">What is a Database Schema?</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a target="_blank" rel="noopener" href="https://dataedo.com/kb/data-glossary/what-is-database-schema">What is Database Schema</a><a href="#fnref:2" rev="footnote"> ↩</a></span></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a target="_blank" rel="noopener" href="https://www.163.com/dy/article/I9EM9NUL05316FM3.html">国产数据库选型生态篇</a><a href="#fnref:3" rev="footnote"> ↩</a></span></li></ol></div></div></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="https://cdn.diffday.com/picgo/diff_128.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="https://cdn.diffday.com/picgo/diff_128.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">DiffDay</div><div class="post-copyright__author_desc">We are here to be creators!</div></div><div class="post-copyright__post__info"><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://blog.diffday.com/%E6%95%B0%E6%8D%AE%E5%BA%93schema%E6%A6%82%E5%BF%B5%E5%B7%AE%E5%BC%82.html')">数据库schema概念差异</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你的肯定与鼓励</span><ul class="reward-group"><li class="reward-item"><a href="http://cdn.diffday.com/picgo/wechatpay.jpg" target="_blank"><img class="post-qr-code-img" src="http://cdn.diffday.com/picgo/wechatpay.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="http://cdn.diffday.com/picgo/alipay-n.jpeg" target="_blank"><img class="post-qr-code-img" src="http://cdn.diffday.com/picgo/alipay-n.jpeg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://blog.diffday.com/%E6%95%B0%E6%8D%AE%E5%BA%93schema%E6%A6%82%E5%BF%B5%E5%B7%AE%E5%BC%82.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=数据库schema概念差异&amp;url=https://blog.diffday.com/%E6%95%B0%E6%8D%AE%E5%BA%93schema%E6%A6%82%E5%BF%B5%E5%B7%AE%E5%BC%82.html&amp;pic=http://cdn.diffday.com/picgo/20230619174001.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.diffday.com" target="_blank">Diffday</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>数据库<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="http://cdn.diffday.com/picgo/20240814180818.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/%E5%B7%A8%E5%A4%B4%E7%9A%84%E5%8C%BB%E7%96%97%E8%BD%AF%E8%82%8B.html"><img class="prev-cover" src="http://cdn.diffday.com/picgo/20230531175036.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">巨头的医疗软肋</div></div></a></div><div class="next-post pull-right"><a href="/%E5%A4%A7%E8%88%AA%E6%B5%B7%E5%89%8D%E5%A5%8F-%E5%8F%A4%E5%9B%BD%E4%BA%A4%E5%BE%80.html"><img class="next-cover" src="http://cdn.diffday.com/picgo/20230616113801.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">大航海前奏-古国交往</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/%E4%BB%8EError-Based-Injection%E7%9C%8BMySQL%20group-by%E8%BF%87%E7%A8%8B.html" title="从Error Based Injection看MySQL group by过程"><img class="cover" src="http://cdn.diffday.com/picgo/20240506152503.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-history fa-fw"></i> 2024-06-18</div><div class="title">从Error Based Injection看MySQL group by过程</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">概念厂商差异</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL"><span class="toc-number">1.1.</span> <span class="toc-text">MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Oracle"><span class="toc-number">1.2.</span> <span class="toc-text">Oracle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL-Server"><span class="toc-number">1.3.</span> <span class="toc-text">SQL Server</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%AE%E5%88%AB%E6%B8%85%E5%8D%95"><span class="toc-number">1.4.</span> <span class="toc-text">差别清单</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">2.</span> <span class="toc-text">逻辑概念的命名空间</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#schema%E7%9A%84%E5%8A%9F%E6%95%88"><span class="toc-number">2.1.</span> <span class="toc-text">schema的功效</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">3.</span> <span class="toc-text">国内的信创数据库生态</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%A7%E4%B8%9A%E5%9B%BE%E8%B0%B1"><span class="toc-number">3.1.</span> <span class="toc-text">产业图谱</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%BA%AF%E6%BA%90%E5%9B%BE%E8%B0%B1"><span class="toc-number">3.2.</span> <span class="toc-text">数据库溯源图谱</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E9%80%89%E6%8B%A9%E8%A7%86%E8%A7%92"><span class="toc-number">3.2.1.</span> <span class="toc-text">用户选择视角</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%B1%E7%B3%BB%E8%AF%B4%E6%98%8E"><span class="toc-number">3.2.2.</span> <span class="toc-text">谱系说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Oracle%E5%85%BC%E5%AE%B9"><span class="toc-number">3.2.2.1.</span> <span class="toc-text">Oracle兼容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL%E5%85%BC%E5%AE%B9"><span class="toc-number">3.2.2.2.</span> <span class="toc-text">MySQL兼容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#PG%E5%85%BC%E5%AE%B9"><span class="toc-number">3.2.2.3.</span> <span class="toc-text">PG兼容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Open-Gauss%E4%BD%93%E7%B3%BB"><span class="toc-number">3.2.2.4.</span> <span class="toc-text">Open Gauss体系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Informix%E5%85%BC%E5%AE%B9"><span class="toc-number">3.2.2.5.</span> <span class="toc-text">Informix兼容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E7%A0%94%E5%88%86%E5%B8%83%E5%BC%8F"><span class="toc-number">3.2.2.6.</span> <span class="toc-text">自研分布式</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text">参考</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/%E6%97%B6%E9%97%B4%E5%8E%BB%E5%93%AA%E4%BA%86.html" title="时间去哪了"><img src="http://cdn.diffday.com/picgo/20210204153707.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="时间去哪了"/></a><div class="content"><a class="title" href="/%E6%97%B6%E9%97%B4%E5%8E%BB%E5%93%AA%E4%BA%86.html" title="时间去哪了">时间去哪了</a><time datetime="2024-08-16T10:47:42.000Z" title="更新于 2024-08-16 18:47:42">2024-08-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%8E%BB%E5%B7%A5%E4%B8%9A%E5%8C%96%E4%B9%8B%E8%BE%A8.html" title="去工业化之辨"><img src="http://cdn.diffday.com/picgo/20240617181026.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="去工业化之辨"/></a><div class="content"><a class="title" href="/%E5%8E%BB%E5%B7%A5%E4%B8%9A%E5%8C%96%E4%B9%8B%E8%BE%A8.html" title="去工业化之辨">去工业化之辨</a><time datetime="2024-08-15T06:55:06.000Z" title="更新于 2024-08-15 14:55:06">2024-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E4%B9%9D%E5%9E%8B%E4%BA%BA%E6%A0%BC.html" title="九型人格"><img src="http://cdn.diffday.com/picgo/20210816153515.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="九型人格"/></a><div class="content"><a class="title" href="/%E4%B9%9D%E5%9E%8B%E4%BA%BA%E6%A0%BC.html" title="九型人格">九型人格</a><time datetime="2024-08-15T06:52:55.000Z" title="更新于 2024-08-15 14:52:55">2024-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%A4%AE%E8%A1%8C%E8%B4%9F%E5%80%BA%E8%A1%A8%E8%A7%A3%E8%AF%BB.html" title="央行负债表解读"><img src="http://cdn.diffday.com/picgo/20211116152006.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="央行负债表解读"/></a><div class="content"><a class="title" href="/%E5%A4%AE%E8%A1%8C%E8%B4%9F%E5%80%BA%E8%A1%A8%E8%A7%A3%E8%AF%BB.html" title="央行负债表解读">央行负债表解读</a><time datetime="2024-08-15T06:39:40.000Z" title="更新于 2024-08-15 14:39:40">2024-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E7%BB%8F%E6%B5%8E%E4%B8%8E%E5%80%BA%E5%8A%A1.html" title="经济与债务"><img src="http://cdn.diffday.com/picgo/20211026172632.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="经济与债务"/></a><div class="content"><a class="title" href="/%E7%BB%8F%E6%B5%8E%E4%B8%8E%E5%80%BA%E5%8A%A1.html" title="经济与债务">经济与债务</a><time datetime="2024-08-15T06:34:10.000Z" title="更新于 2024-08-15 14:34:10">2024-08-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%B0%8F%E5%8A%A8%E7%89%A9%E5%85%BB%E6%88%90%E6%A8%A1%E5%BC%8F.html" title="小动物养成模式"><img src="http://cdn.diffday.com/picgo/20220901165227.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="小动物养成模式"/></a><div class="content"><a class="title" href="/%E5%B0%8F%E5%8A%A8%E7%89%A9%E5%85%BB%E6%88%90%E6%A8%A1%E5%BC%8F.html" title="小动物养成模式">小动物养成模式</a><time datetime="2024-08-15T06:31:27.000Z" title="更新于 2024-08-15 14:31:27">2024-08-15</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2018 - 2024 By <a class="footer-bar-link" href="/" title="DiffDay" target="_blank">DiffDay</a></div></div><div id="footer-type-tips"></div><div class="js-pjax"><script>function subtitleType () {
  getScript('https://sdk.jinrishici.com/v2/browser/jinrishici.js').then(() => {
    jinrishici.load(result =>{
      if (false) {
        const sub = []
        const content = result.data.content
        sub.unshift(content)
        window.typed = new Typed('#footer-type-tips', {
          strings: sub,
          startDelay: 300,
          typeSpeed: 150,
          loop: true,
          backSpeed: 50,
        })
      } else {
        document.getElementById('footer-type-tips').innerHTML = result.data.content
      }
    })
  })
}

if (false) {
  if (typeof Typed === 'function') {
    subtitleType()
  } else {
    getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
  }
} else {
  subtitleType()
}
</script></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a><a class="footer-bar-link" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/" title="粤ICP备-18103410号">粤ICP备-18103410号</a><a class="footer-bar-link cc" href="/copyright" title="cc协议"><i class="anzhiyufont anzhiyu-icon-copyright-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-by-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nc-line"></i><i class="anzhiyufont anzhiyu-icon-creative-commons-nd-line"></i></a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">139</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">47</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><span> 归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/categories/"><span> 分类</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本站</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/copyright/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 版权协议</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
  //if ($mermaid.length === 0) return
  const runMermaid = () => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from($mermaid).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const loadMermaid = () => {
    window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js').then(runMermaid)
  }

  anzhiyu.addGlobalFn('themeChange', runMermaid, 'mermaid')

  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'uwklgzjj0IepCMXNYCU3t9Ah-9Nh9j0Va',
      appKey: 'jRMVc9QS0SBr1L9heA2V0m4q',
      avatar: 'mp',
      serverURLs: 'https://uwklgzjj.lc-cn-e1-shared.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !true) {
    if (true) anzhiyu.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getIcon = (icon, mail) => {
    if (icon) return icon
    let defaultIcon = '?d=mp'
    let iconUrl = `https://gravatar.loli.net/avatar/${md5(mail.toLowerCase()) + defaultIcon}`
    return iconUrl
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const getComment = () => {
    const serverURL = 'https://uwklgzjj.lc-cn-e1-shared.com'

    var settings = {
      "method": "GET",
      "headers": {
        "X-LC-Id": 'uwklgzjj0IepCMXNYCU3t9Ah-9Nh9j0Va',
        "X-LC-Key": 'jRMVc9QS0SBr1L9heA2V0m4q',
        "Content-Type": "application/json"
      },
    }

    fetch(`${serverURL}/1.1/classes/Comment?limit=6&order=-createdAt`,settings)
      .then(response => response.json())
      .then(data => {
        const valineArray = data.results.map(function (e) {
          return {
            'avatar': getIcon(e.QQAvatar, e.mail),
            'content': changeContent(e.comment),
            'nick': e.nick,
            'url': e.url + '#' + e.objectId,
            'date': e.updatedAt,
          }
        })
        saveToLocal.set('valine-newest-comments', JSON.stringify(valineArray), 10/(60*24))
        generateHtml(valineArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      }) 
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('valine-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "visitor@anheyu.com";
</script><script async data-pjax src="https://cdn.jsdelivr.net/npm/anzhiyu-theme-static/waterfall/waterfall.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/anzhiyu-theme-static/icon/ali_iconfont_css.min.css"><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-X0MW6B53JB', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.jsdelivr.net/npm/anzhiyu-theme-static/accesskey/accesskey.min.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>